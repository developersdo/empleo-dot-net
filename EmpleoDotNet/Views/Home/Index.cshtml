@using EmpleoDotNet.ViewModel
@model HomeViewModel

@{
    ViewBag.Title = "";
}

@* This added here because the partial view _FindsJobPartinal need this JS to work :( *@
@section scripts {
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places"></script>
    <script type="text/javascript">

        google.maps.event.addDomListener(window, 'load', function () {
            var places = new google.maps.places.Autocomplete(document.getElementById('location-input'));
            google.maps.event.addListener(places, 'place_changed', function () {
                var place = places.getPlace();
                if (place) {
                    var placeId = place.place_id;
                    var latitude = place.geometry.location.lat();
                    var longitude = place.geometry.location.lng();

                    $('#location-placeid').val(placeId);
                    $('#location-latitude').val(latitude);
                    $('#location-longitude').val(longitude);
                } else {
                    $('#location-input').val('');
                    $('#location-placeid').val('');
                }
            });
        });
    </script>
}


@Html.Partial("_FindJobsPartial", Model.SearchPamameters)

<div class="container" style="margin-top: -50px;">
    <section id="jobs">
        <div class="container">
            <div class="row">
                <div>
                    <h2>Empleos Recientes</h2>
                </div>
                @Html.Partial("_JobListPartial", Model.JobOpportunities)
                <br/>
                <a class="btn btn-primary" href="@Url.Action("Index", "JobOpportunity")">Mostrar mas empleos</a>
            </div>
        </div>
    </section>
</div>

<section id="stats" class="parallax text-center">
    <div class="tint"></div>
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <h1>Estadisticas</h1>
                <h4>Cuantas personas hemos ayudado</h4>
            </div>
        </div>
        <div class="row" id="counter">

            <div class="counter">
                <div class="number">@Model.Stats.JobCount</div>
                <div class="description">Trabajos</div>
            </div>

            <div class="counter">
                <div class="number">@Model.Stats.Visits</div>
                <div class="description">Visitas</div>
            </div>

            <div class="counter">
                <div class="number">@Model.Stats.CompanyCount</div>
                <div class="description">Empresas</div>
            </div>

        </div>
    </div>
</section>